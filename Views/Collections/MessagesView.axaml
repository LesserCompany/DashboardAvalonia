<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:LesserDashboardClient.Views.Collections"
             xmlns:vm="clr-namespace:LesserDashboardClient.ViewModels"
             xmlns:collectionsVm="clr-namespace:LesserDashboardClient.ViewModels.Collections"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="LesserDashboardClient.Views.Collections.MessagesView"
             x:DataType="collectionsVm:CollectionsViewModel">

  <UserControl.Styles>
    <Style Selector="Border.skeleton">
      <Style.Animations>
        <Animation Duration="0:0:1.5" IterationCount="INFINITE" Easing="SineEaseInOut">
          <KeyFrame Cue="0%">
            <Setter Property="Opacity" Value="0.2"/>
          </KeyFrame>
          <KeyFrame Cue="50%">
            <Setter Property="Opacity" Value="0.6"/>
          </KeyFrame>
          <KeyFrame Cue="100%">
            <Setter Property="Opacity" Value="0.2"/>
          </KeyFrame>
        </Animation>
      </Style.Animations>
    </Style>
  </UserControl.Styles>

  <Grid RowDefinitions="Auto,*">
    <!-- Botão de voltar  -->
    <Button Grid.Row="0" 
            Command="{Binding BackLasViewCommand}" 
            HorizontalAlignment="Left" 
            VerticalAlignment="Top"
            Margin="10"
            Padding="8,4"
            Background="Transparent"
            BorderThickness="0">
      <StackPanel Orientation="Horizontal" Spacing="4">
        <TextBlock Text="←" FontSize="16" VerticalAlignment="Center" />
        <TextBlock Text="{Tr 'Back'}" VerticalAlignment="Center" />
      </StackPanel>
    </Button>

    <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
      <StackPanel Margin="20" Spacing="30">
        
        <!-- Seção Mensagens -->
        <StackPanel>
          <!-- Header com título e botão -->
          <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,20">
            <TextBlock Text="{Tr 'Messages'}" 
                       Grid.Column="0"
                       FontSize="30" 
                       FontWeight="Bold" 
                       Foreground="{DynamicResource TextPrimaryBrush}" 
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>
            
            <!-- Botão Marcar todas como lidas -->
            <Button Grid.Column="1"
                    Content="{Tr 'Mark All as Read'}"
                    x:Name="MarkAllAsReadButton"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Padding="12,6"
                    FontSize="12"
                    IsVisible="False"
                    Cursor="Hand"/>
          </Grid>
          
          <!-- Painel para mensagens dinâmicas -->
          <StackPanel x:Name="MessagesPanel" Spacing="20">
            
            <!-- Skeleton Loading (será substituído pelas mensagens reais) -->
            <StackPanel x:Name="SkeletonPanel" Spacing="20">
              <!-- Skeleton 1 -->
              <Border CornerRadius="8" Padding="20" Background="{DynamicResource CardBackgroundInactiveBrush}" BorderThickness="1" BorderBrush="{DynamicResource SeparatorBrush}">
                <StackPanel Spacing="8">
                  <Border x:Name="SkeletonDate1" Classes="skeleton" Height="20" Width="80" Background="{DynamicResource TextPrimaryBrush}" CornerRadius="4"/>
                  <Border x:Name="SkeletonText1" Classes="skeleton" Height="16" HorizontalAlignment="Stretch" Background="{DynamicResource TextSecondaryBrush}" CornerRadius="4"/>
                  <Border x:Name="SkeletonText2" Classes="skeleton" Height="16" Width="200" Background="{DynamicResource TextSecondaryBrush}" CornerRadius="4"/>
                </StackPanel>
              </Border>
              
              <!-- Skeleton 2 -->
              <Border CornerRadius="8" Padding="20" Background="{DynamicResource CardBackgroundInactiveBrush}" BorderThickness="1" BorderBrush="{DynamicResource SeparatorBrush}">
                <StackPanel Spacing="8">
                  <Border x:Name="SkeletonDate2" Classes="skeleton" Height="20" Width="80" Background="{DynamicResource TextPrimaryBrush}" CornerRadius="4"/>
                  <Border x:Name="SkeletonText3" Classes="skeleton" Height="16" HorizontalAlignment="Stretch" Background="{DynamicResource TextSecondaryBrush}" CornerRadius="4"/>
                  <Border x:Name="SkeletonText4" Classes="skeleton" Height="16" Width="250" Background="{DynamicResource TextSecondaryBrush}" CornerRadius="4"/>
                </StackPanel>
              </Border>
            </StackPanel>
            
          </StackPanel>
        </StackPanel>
        
      </StackPanel>
    </ScrollViewer>
  </Grid>

</UserControl>
